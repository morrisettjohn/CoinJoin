"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
const src_1 = __importStar(require("src"));
const buffer_1 = require("buffer/");
const ip = "localhost";
const port = 9650;
const protocol = "http";
const networkID = 1;
const avalanche = new src_1.default(ip, port, protocol, networkID);
const mnemonic = src_1.Mnemonic.getInstance();
const xchain = avalanche.XChain();
const xKeychain = xchain.keyChain();
describe("HDNode", () => {
    const xPriv = "xprv9s21ZrQH143K4RH1nRkHwuVz3qGREBLobwUoUBowLDucQXm4do8jvz12agvjHrAwjJXtq9BZ87WBPUPScDBnjKvBKVQ5xbS7GQwJKW7vXLD";
    const childXPriv = "xprvA7X7udsZk3q9mNMcGnN8PKHv5eHm6JA3TRzW2HsWnrYHbccXh5YMnRLA83VCPKWQUFmKf9AfCXSmoFs7HJ8Yr1LK52wJDVk262vGFszM4nb";
    const xPub = "xpub661MyMwAqRbcFSdAk5S6UECmA6MFQWiRBfPU5AsVcmrKY5HoFKPNYrKEq7isvaZVfNxhkrv5oXxFpQc6AVEcVW5NxeamKD6LyLUDMntbnq7";
    const msg = "bb413645935a9bf1ecf0c3d30df2d573";
    const addrs = [
        'X-avax15qwuklmrfcmfw78yvka9pjsukjeevl4aveehq0',
        'X-avax13wqaxm6zgjq5qwzuyyxyl9yrz3edcgwgfht6gt',
        'X-avax1z3dn3vczxttts8dsdjfgtnkekf8nvqhhsj5stl',
        'X-avax1j6kze9n7r3e8wq6jta5mf6pd3fwnu0v9wygc8p',
        'X-avax1ngasfmvl8g63lzwznp0374myz7ajt4746g750m',
        'X-avax1pr7pzcggtrk6uap58sfsrlnhqhayly2gtlux9l',
        'X-avax1wwtn3gx7ke4ge2c29eg5sun36nyj55u4dle9gn',
        'X-avax13527pvlnxa4wrfgt0h8ya7nkjawqq29sv5s89x',
        'X-avax1gw6agtcsz969ugpqh2zx2lmjchg6npklvp43qq',
        'X-avax10agjetvj0a0vf6wtlh7s6ctr8ha8ch8km8z567'
    ];
    test("derive", () => {
        const seed = 'a0c42a9c3ac6abf2ba6a9946ae83af18f51bf1c9fa7dacc4c92513cc4dd015834341c775dcd4c0fac73547c5662d81a9e9361a0aac604a73a321bd9103bce8af';
        const hdnode = new src_1.HDNode(seed);
        const child = hdnode.derive("m/9000'/2614666'/4849181'/4660'/2'/1/3");
        expect(child.privateExtendedKey).toBe(childXPriv);
    });
    test("fromMasterSeedBuffer", () => {
        const seed = 'a0c42a9c3ac6abf2ba6a9946ae83af18f51bf1c9fa7dacc4c92513cc4dd015834341c775dcd4c0fac73547c5662d81a9e9361a0aac604a73a321bd9103bce8af';
        const hdnode = new src_1.HDNode(buffer_1.Buffer.from(seed));
        expect(hdnode.privateExtendedKey).toBe(xPriv);
    });
    test("fromMasterSeedString", () => {
        const seed = 'a0c42a9c3ac6abf2ba6a9946ae83af18f51bf1c9fa7dacc4c92513cc4dd015834341c775dcd4c0fac73547c5662d81a9e9361a0aac604a73a321bd9103bce8af';
        const hdnode = new src_1.HDNode(seed);
        expect(hdnode.privateExtendedKey).toBe(xPriv);
    });
    test("fromXPriv", () => {
        const hdnode = new src_1.HDNode(xPriv);
        expect(hdnode.privateExtendedKey).toBe(xPriv);
    });
    test("fromXPub", () => {
        const hdnode = new src_1.HDNode(xPub);
        expect(hdnode.publicExtendedKey).toBe(xPub);
    });
    test("sign", () => {
        const hdnode = new src_1.HDNode(xPriv);
        const sig = hdnode.sign(buffer_1.Buffer.from(msg));
        expect(buffer_1.Buffer.isBuffer(sig)).toBeTruthy();
    });
    test("verify", () => {
        const hdnode = new src_1.HDNode(xPriv);
        const sig = hdnode.sign(buffer_1.Buffer.from(msg));
        const verify = hdnode.verify(buffer_1.Buffer.from(msg), sig);
        expect(verify).toBeTruthy();
    });
    test("wipePrivateData", () => {
        const hdnode = new src_1.HDNode(xPriv);
        hdnode.wipePrivateData();
        expect(hdnode.privateKey).toBeNull();
    });
    test("BIP44", () => {
        const m = "immune year obscure laptop wage diamond join glue ecology envelope box fade mixed cradle athlete absorb stick rival punch dinosaur skin blind benefit pretty";
        const seed = mnemonic.mnemonicToSeedSync(m);
        const hdnode = new src_1.HDNode(seed);
        for (let i = 0; i <= 9; i++) {
            const child = hdnode.derive(`m/44'/9000'/0'/0/${i}`);
            xKeychain.importKey(child.privateKeyCB58);
        }
        const xAddressStrings = xchain.keyChain().getAddressStrings();
        expect(xAddressStrings).toStrictEqual(addrs);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGRub2RlLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi90ZXN0cy91dGlscy9oZG5vZGUudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSwyQ0FBaUQ7QUFDakQsb0NBQWdDO0FBR2hDLE1BQU0sRUFBRSxHQUFXLFdBQVcsQ0FBQTtBQUM5QixNQUFNLElBQUksR0FBVyxJQUFJLENBQUE7QUFDekIsTUFBTSxRQUFRLEdBQVcsTUFBTSxDQUFBO0FBQy9CLE1BQU0sU0FBUyxHQUFXLENBQUMsQ0FBQTtBQUMzQixNQUFNLFNBQVMsR0FBYyxJQUFJLGFBQVMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxTQUFTLENBQUMsQ0FBQTtBQUN6RSxNQUFNLFFBQVEsR0FBYSxjQUFRLENBQUMsV0FBVyxFQUFFLENBQUE7QUFDakQsTUFBTSxNQUFNLEdBQVcsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFBO0FBQ3pDLE1BQU0sU0FBUyxHQUFhLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQTtBQUU3QyxRQUFRLENBQUMsUUFBUSxFQUFFLEdBQVMsRUFBRTtJQUM1QixNQUFNLEtBQUssR0FBVyxpSEFBaUgsQ0FBQTtJQUN2SSxNQUFNLFVBQVUsR0FBVyxpSEFBaUgsQ0FBQTtJQUM1SSxNQUFNLElBQUksR0FBVyxpSEFBaUgsQ0FBQTtJQUN0SSxNQUFNLEdBQUcsR0FBVyxrQ0FBa0MsQ0FBQTtJQUN0RCxNQUFNLEtBQUssR0FBYTtRQUN0QiwrQ0FBK0M7UUFDL0MsK0NBQStDO1FBQy9DLCtDQUErQztRQUMvQywrQ0FBK0M7UUFDL0MsK0NBQStDO1FBQy9DLCtDQUErQztRQUMvQywrQ0FBK0M7UUFDL0MsK0NBQStDO1FBQy9DLCtDQUErQztRQUMvQywrQ0FBK0M7S0FDaEQsQ0FBQTtJQUVELElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBUyxFQUFFO1FBQ3hCLE1BQU0sSUFBSSxHQUFX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LE9BQU8sRUFBRSxHQUFTLEVBQUU7UUFDdkIsTUFBTSxDQUFDLEdBQVcsOEpBQThKLENBQUE7UUFDaEwsTUFBTSxJQUFJLEdBQVcsUUFBUSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ25ELE1BQU0sTUFBTSxHQUFXLElBQUksWUFBTSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ3ZDLEtBQUssSUFBSSxDQUFDLEdBQVcsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDbkMsTUFBTSxLQUFLLEdBQVcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFLENBQUMsQ0FBQTtZQUM1RCxTQUFTLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQTtTQUMxQztRQUNELE1BQU0sZUFBZSxHQUFhLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxDQUFBO1FBQ3ZFLE1BQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUE7SUFDOUMsQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBBdmFsYW5jaGUsIHsgSEROb2RlLCBNbmVtb25pYyB9IGZyb20gXCJzcmNcIlxuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyLydcbmltcG9ydCB7IEFWTUFQSSwgS2V5Q2hhaW4gfSBmcm9tIFwic3JjL2FwaXMvYXZtXCJcblxuY29uc3QgaXA6IHN0cmluZyA9IFwibG9jYWxob3N0XCJcbmNvbnN0IHBvcnQ6IG51bWJlciA9IDk2NTBcbmNvbnN0IHByb3RvY29sOiBzdHJpbmcgPSBcImh0dHBcIlxuY29uc3QgbmV0d29ya0lEOiBudW1iZXIgPSAxXG5jb25zdCBhdmFsYW5jaGU6IEF2YWxhbmNoZSA9IG5ldyBBdmFsYW5jaGUoaXAsIHBvcnQsIHByb3RvY29sLCBuZXR3b3JrSUQpXG5jb25zdCBtbmVtb25pYzogTW5lbW9uaWMgPSBNbmVtb25pYy5nZXRJbnN0YW5jZSgpXG5jb25zdCB4Y2hhaW46IEFWTUFQSSA9IGF2YWxhbmNoZS5YQ2hhaW4oKVxuY29uc3QgeEtleWNoYWluOiBLZXlDaGFpbiA9IHhjaGFpbi5rZXlDaGFpbigpXG5cbmRlc2NyaWJlKFwiSEROb2RlXCIsICgpOiB2b2lkID0+IHtcbiAgY29uc3QgeFByaXY6IHN0cmluZyA9IFwieHBydjlzMjFaclFIMTQzSzRSSDFuUmtId3VWejNxR1JFQkxvYndVb1VCb3dMRHVjUVhtNGRvOGp2ejEyYWd2akhyQXdqSlh0cTlCWjg3V0JQVVBTY0RCbmpLdkJLVlE1eGJTN0dRd0pLVzd2WExEXCJcbiAgY29uc3QgY2hpbGRYUHJpdjogc3RyaW5nID0gXCJ4cHJ2QTdYN3Vkc1prM3E5bU5NY0duTjhQS0h2NWVIbTZKQTNUUnpXMkhzV25yWUhiY2NYaDVZTW5STEE4M1ZDUEtXUVVGbUtmOUFmQ1hTbW9GczdISjhZcjFMSzUyd0pEVmsyNjJ2R0Zzek00bmJcIlxuICBjb25zdCB4UHViOiBzdHJpbmcgPSBcInhwdWI2NjFNeU13QXFSYmNGU2RBazVTNlVFQ21BNk1GUVdpUkJmUFU1QXNWY21yS1k1SG9GS1BOWXJLRXE3aXN2YVpWZk54aGtydjVvWHhGcFFjNkFWRWNWVzVOeGVhbUtENkx5TFVETW50Ym5xN1wiXG4gIGNvbnN0IG1zZzogc3RyaW5nID0gXCJiYjQxMzY0NTkzNWE5YmYxZWNmMGMzZDMwZGYyZDU3M1wiXG4gIGNvbnN0IGFkZHJzOiBzdHJpbmdbXSA9IFtcbiAgICAnWC1hdmF4MTVxd3VrbG1yZmNtZnc3OHl2a2E5cGpzdWtqZWV2bDRhdmVlaHEwJyxcbiAgICAnWC1hdmF4MTN3cWF4bTZ6Z2pxNXF3enV5eXh5bDl5cnozZWRjZ3dnZmh0Nmd0JyxcbiAgICAnWC1hdmF4MXozZG4zdmN6eHR0dHM4ZHNkamZndG5rZWtmOG52cWhoc2o1c3RsJyxcbiAgICAnWC1hdmF4MWo2a3plOW43cjNlOHdxNmp0YTVtZjZwZDNmd251MHY5d3lnYzhwJyxcbiAgICAnWC1hdmF4MW5nYXNmbXZsOGc2M2x6d3pucDAzNzRteXo3YWp0NDc0Nmc3NTBtJyxcbiAgICAnWC1hdmF4MXByN3B6Y2dndHJrNnVhcDU4c2ZzcmxuaHFoYXlseTJndGx1eDlsJyxcbiAgICAnWC1hdmF4MXd3dG4zZ3g3a2U0Z2UyYzI5ZWc1c3VuMzZueWo1NXU0ZGxlOWduJyxcbiAgICAnWC1hdmF4MTM1MjdwdmxueGE0d3JmZ3QwaDh5YTdua2phd3FxMjlzdjVzODl4JyxcbiAgICAnWC1hdmF4MWd3NmFndGNzejk2OXVncHFoMnp4MmxtamNoZzZucGtsdnA0M3FxJyxcbiAgICAnWC1hdmF4MTBhZ2pldHZqMGEwdmY2d3RsaDdzNmN0cjhoYThjaDhrbTh6NTY3J1xuICBdXG5cbiAgdGVzdChcImRlcml2ZVwiLCAoKTogdm9pZCA9PiB7XG4gICAgY29uc3Qgc2VlZDogc3RyaW5nID0gJ2EwYzQyYTljM2FjNmFiZjJiYTZhOTk0NmFlODNhZjE4ZjUxYmYxYzlmYTdkYWNjNGM5MjUxM2NjNGRkMDE1ODM0MzQxYzc3NWRjZDRjMGZhYzczNTQ3YzU2NjJkODFhOWU5MzYxYTBhYWM2MDRhNzNhMzIxYmQ5MTAzYmNlOGFmJ1xuICAgIGNvbnN0IGhkbm9kZTogSEROb2RlID0gbmV3IEhETm9kZShzZWVkKVxuICAgIGNvbnN0IGNoaWxkID0gaGRub2RlLmRlcml2ZShcIm0vOTAwMCcvMjYxNDY2NicvNDg0OTE4MScvNDY2MCcvMicvMS8zXCIpXG4gICAgZXhwZWN0KGNoaWxkLnByaXZhdGVFeHRlbmRlZEtleSkudG9CZShjaGlsZFhQcml2KVxuICB9KVxuXG4gIHRlc3QoXCJmcm9tTWFzdGVyU2VlZEJ1ZmZlclwiLCAoKTogdm9pZCA9PiB7XG4gICAgY29uc3Qgc2VlZDogc3RyaW5nID0gJ2EwYzQyYTljM2FjNmFiZjJiYTZhOTk0NmFlODNhZjE4ZjUxYmYxYzlmYTdkYWNjNGM5MjUxM2NjNGRkMDE1ODM0MzQxYzc3NWRjZDRjMGZhYzczNTQ3YzU2NjJkODFhOWU5MzYxYTBhYWM2MDRhNzNhMzIxYmQ5MTAzYmNlOGFmJ1xuICAgIGNvbnN0IGhkbm9kZTogSEROb2RlID0gbmV3IEhETm9kZShCdWZmZXIuZnJvbShzZWVkKSlcbiAgICBleHBlY3QoaGRub2RlLnByaXZhdGVFeHRlbmRlZEtleSkudG9CZSh4UHJpdilcbiAgfSlcblxuICB0ZXN0KFwiZnJvbU1hc3RlclNlZWRTdHJpbmdcIiwgKCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IHNlZWQ6IHN0cmluZyA9ICdhMGM0MmE5YzNhYzZhYmYyYmE2YTk5NDZhZTgzYWYxOGY1MWJmMWM5ZmE3ZGFjYzRjOTI1MTNjYzRkZDAxNTgzNDM0MWM3NzVkY2Q0YzBmYWM3MzU0N2M1NjYyZDgxYTllOTM2MWEwYWFjNjA0YTczYTMyMWJkOTEwM2JjZThhZidcbiAgICBjb25zdCBoZG5vZGU6IEhETm9kZSA9IG5ldyBIRE5vZGUoc2VlZClcbiAgICBleHBlY3QoaGRub2RlLnByaXZhdGVFeHRlbmRlZEtleSkudG9CZSh4UHJpdilcbiAgfSlcblxuICB0ZXN0KFwiZnJvbVhQcml2XCIsICgpOiB2b2lkID0+IHtcbiAgICBjb25zdCBoZG5vZGU6IEhETm9kZSA9IG5ldyBIRE5vZGUoeFByaXYpXG4gICAgZXhwZWN0KGhkbm9kZS5wcml2YXRlRXh0ZW5kZWRLZXkpLnRvQmUoeFByaXYpXG4gIH0pXG5cbiAgdGVzdChcImZyb21YUHViXCIsICgpOiB2b2lkID0+IHtcbiAgICBjb25zdCBoZG5vZGU6IEhETm9kZSA9IG5ldyBIRE5vZGUoeFB1YilcbiAgICBleHBlY3QoaGRub2RlLnB1YmxpY0V4dGVuZGVkS2V5KS50b0JlKHhQdWIpXG4gIH0pXG5cbiAgdGVzdChcInNpZ25cIiwgKCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGhkbm9kZTogSEROb2RlID0gbmV3IEhETm9kZSh4UHJpdilcbiAgICBjb25zdCBzaWc6IEJ1ZmZlciA9IGhkbm9kZS5zaWduKEJ1ZmZlci5mcm9tKG1zZykpXG4gICAgZXhwZWN0KEJ1ZmZlci5pc0J1ZmZlcihzaWcpKS50b0JlVHJ1dGh5KClcbiAgfSlcblxuICB0ZXN0KFwidmVyaWZ5XCIsICgpOiB2b2lkID0+IHtcbiAgICBjb25zdCBoZG5vZGU6IEhETm9kZSA9IG5ldyBIRE5vZGUoeFByaXYpXG4gICAgY29uc3Qgc2lnOiBCdWZmZXIgPSBoZG5vZGUuc2lnbihCdWZmZXIuZnJvbShtc2cpKVxuICAgIGNvbnN0IHZlcmlmeTogYm9vbGVhbiA9IGhkbm9kZS52ZXJpZnkoQnVmZmVyLmZyb20obXNnKSwgc2lnKVxuICAgIGV4cGVjdCh2ZXJpZnkpLnRvQmVUcnV0aHkoKVxuICB9KVxuXG4gIHRlc3QoXCJ3aXBlUHJpdmF0ZURhdGFcIiwgKCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGhkbm9kZTogSEROb2RlID0gbmV3IEhETm9kZSh4UHJpdilcbiAgICBoZG5vZGUud2lwZVByaXZhdGVEYXRhKClcbiAgICBleHBlY3QoaGRub2RlLnByaXZhdGVLZXkpLnRvQmVOdWxsKClcbiAgfSlcblxuICB0ZXN0KFwiQklQNDRcIiwgKCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IG06IHN0cmluZyA9IFwiaW1tdW5lIHllYXIgb2JzY3VyZSBsYXB0b3Agd2FnZSBkaWFtb25kIGpvaW4gZ2x1ZSBlY29sb2d5IGVudmVsb3BlIGJveCBmYWRlIG1peGVkIGNyYWRsZSBhdGhsZXRlIGFic29yYiBzdGljayByaXZhbCBwdW5jaCBkaW5vc2F1ciBza2luIGJsaW5kIGJlbmVmaXQgcHJldHR5XCJcbiAgICBjb25zdCBzZWVkOiBCdWZmZXIgPSBtbmVtb25pYy5tbmVtb25pY1RvU2VlZFN5bmMobSlcbiAgICBjb25zdCBoZG5vZGU6IEhETm9kZSA9IG5ldyBIRE5vZGUoc2VlZClcbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDw9IDk7IGkrKykge1xuICAgICAgY29uc3QgY2hpbGQ6IEhETm9kZSA9IGhkbm9kZS5kZXJpdmUoYG0vNDQnLzkwMDAnLzAnLzAvJHtpfWApXG4gICAgICB4S2V5Y2hhaW4uaW1wb3J0S2V5KGNoaWxkLnByaXZhdGVLZXlDQjU4KVxuICAgIH1cbiAgICBjb25zdCB4QWRkcmVzc1N0cmluZ3M6IHN0cmluZ1tdID0geGNoYWluLmtleUNoYWluKCkuZ2V0QWRkcmVzc1N0cmluZ3MoKVxuICAgIGV4cGVjdCh4QWRkcmVzc1N0cmluZ3MpLnRvU3RyaWN0RXF1YWwoYWRkcnMpXG4gIH0pXG59KVxuIl19